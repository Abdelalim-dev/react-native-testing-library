(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{72:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return s}));var a=n(1),r=n(6),i=(n(0),n(81)),c={id:"api",title:"API"},o={unversionedId:"api",id:"api",isDocsHomePage:!1,title:"API",description:"Table of contents:",source:"@site/docs/API.md",permalink:"/react-native-testing-library/docs/api",editUrl:"https://github.com/callstack/react-native-testing-library/blob/main/docs/API.md",sidebar:"docs",previous:{title:"Getting Started",permalink:"/react-native-testing-library/docs/getting-started"},next:{title:"Queries",permalink:"/react-native-testing-library/docs/api-queries"}},b=[{value:"Table of contents:",id:"table-of-contents",children:[]},{value:"<code>render</code>",id:"render",children:[{value:"<code>...queries</code>",id:"queries",children:[]},{value:"<code>update</code>",id:"update",children:[]},{value:"<code>unmount</code>",id:"unmount",children:[]},{value:"<code>debug</code>",id:"debug",children:[]},{value:"<code>toJSON</code>",id:"tojson",children:[]},{value:"<code>container</code>",id:"container",children:[]}]},{value:"<code>screen</code>",id:"screen",children:[]},{value:"<code>cleanup</code>",id:"cleanup",children:[]},{value:"<code>fireEvent</code>",id:"fireevent",children:[]},{value:"<code>fireEvent[eventName]</code>",id:"fireeventeventname",children:[{value:"<code>fireEvent.press</code>",id:"fireeventpress",children:[]},{value:"<code>fireEvent.changeText</code>",id:"fireeventchangetext",children:[]},{value:"<code>fireEvent.scroll</code>",id:"fireeventscroll",children:[]}]},{value:"<code>waitFor</code>",id:"waitfor",children:[]},{value:"<code>waitForElementToBeRemoved</code>",id:"waitforelementtoberemoved",children:[]},{value:"<code>within</code>, <code>getQueriesForElement</code>",id:"within-getqueriesforelement",children:[]},{value:"<code>query</code> APIs",id:"query-apis",children:[]},{value:"<code>queryAll</code> APIs",id:"queryall-apis",children:[]},{value:"<code>act</code>",id:"act",children:[]},{value:"<code>renderHook</code>",id:"renderhook",children:[{value:"<code>callback</code>",id:"callback",children:[]},{value:"<code>options</code> (Optional)",id:"options-optional",children:[]},{value:"<code>RenderHookResult</code> object",id:"renderhookresult-object",children:[]},{value:"Examples",id:"examples",children:[]}]}],l={rightToc:b};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h3",{id:"table-of-contents"},"Table of contents:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#render"}),Object(i.b)("inlineCode",{parentName:"a"},"render")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#queries"}),Object(i.b)("inlineCode",{parentName:"a"},"...queries")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#example"}),"Example")))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#update"}),Object(i.b)("inlineCode",{parentName:"a"},"update"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#unmount"}),Object(i.b)("inlineCode",{parentName:"a"},"unmount"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#debug"}),Object(i.b)("inlineCode",{parentName:"a"},"debug")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#debugshallow"}),Object(i.b)("inlineCode",{parentName:"a"},"debug.shallow"))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#tojson"}),Object(i.b)("inlineCode",{parentName:"a"},"toJSON"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#container"}),Object(i.b)("inlineCode",{parentName:"a"},"container"))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#screen"}),Object(i.b)("inlineCode",{parentName:"a"},"screen"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#cleanup"}),Object(i.b)("inlineCode",{parentName:"a"},"cleanup"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#fireevent"}),Object(i.b)("inlineCode",{parentName:"a"},"fireEvent"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#fireeventeventname"}),Object(i.b)("inlineCode",{parentName:"a"},"fireEvent[eventName]")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#fireeventpress"}),Object(i.b)("inlineCode",{parentName:"a"},"fireEvent.press"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#fireeventchangetext"}),Object(i.b)("inlineCode",{parentName:"a"},"fireEvent.changeText"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#fireeventscroll"}),Object(i.b)("inlineCode",{parentName:"a"},"fireEvent.scroll")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#on-a-scrollview"}),"On a ",Object(i.b)("inlineCode",{parentName:"a"},"ScrollView"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#on-a-flatlist"}),"On a ",Object(i.b)("inlineCode",{parentName:"a"},"FlatList"))))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#waitfor"}),Object(i.b)("inlineCode",{parentName:"a"},"waitFor"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#waitforelementtoberemoved"}),Object(i.b)("inlineCode",{parentName:"a"},"waitForElementToBeRemoved"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#within-getqueriesforelement"}),Object(i.b)("inlineCode",{parentName:"a"},"within"),", ",Object(i.b)("inlineCode",{parentName:"a"},"getQueriesForElement"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#query-apis"}),Object(i.b)("inlineCode",{parentName:"a"},"query")," APIs")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#queryall-apis"}),Object(i.b)("inlineCode",{parentName:"a"},"queryAll")," APIs")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#act"}),Object(i.b)("inlineCode",{parentName:"a"},"act"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#renderhook"}),Object(i.b)("inlineCode",{parentName:"a"},"renderHook")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#callback"}),Object(i.b)("inlineCode",{parentName:"a"},"callback"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#options-optional"}),Object(i.b)("inlineCode",{parentName:"a"},"options")," (Optional)"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#initialprops"}),Object(i.b)("inlineCode",{parentName:"a"},"initialProps"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#wrapper"}),Object(i.b)("inlineCode",{parentName:"a"},"wrapper"))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#renderhookresult-object"}),Object(i.b)("inlineCode",{parentName:"a"},"RenderHookResult")," object"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#result"}),Object(i.b)("inlineCode",{parentName:"a"},"result"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#rerender"}),Object(i.b)("inlineCode",{parentName:"a"},"rerender"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#unmount-1"}),Object(i.b)("inlineCode",{parentName:"a"},"unmount"))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#examples"}),"Examples"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#with-initialprops"}),"With ",Object(i.b)("inlineCode",{parentName:"a"},"initialProps"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#with-wrapper"}),"With ",Object(i.b)("inlineCode",{parentName:"a"},"wrapper")))))))),Object(i.b)("p",null,"This page gathers public API of React Native Testing Library along with usage examples."),Object(i.b)("h2",{id:"render"},Object(i.b)("inlineCode",{parentName:"h2"},"render")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/render.test.tsx"}),Object(i.b)("inlineCode",{parentName:"a"},"Example code")))),Object(i.b)("p",null,"Defined as:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function render(\n  component: React.Element<any>,\n  options?: {\n    /* A React Component that renders `component` as children */\n    wrapper?: React.ComponentType<any>,\n    /* You won't often use this, but it's helpful when testing refs */\n    createNodeMock: (element: React.Element<any>) => any,\n  }\n): RenderResult {}\n")),Object(i.b)("p",null,"Deeply renders given React element and returns helpers to query the output components structure."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render } from '@testing-library/react-native';\nimport { QuestionsBoard } from '../QuestionsBoard';\n\ntest('should verify two questions', () => {\n  render(<QuestionsBoard {...props} />);\n  const allQuestions = screen.queryAllByRole('header');\n\n  expect(allQuestions).toHaveLength(2);\n});\n")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"When using React context providers, like Redux Provider, you'll likely want to wrap rendered component with them. In such cases it's convenient to create your custom ",Object(i.b)("inlineCode",{parentName:"p"},"render")," method. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://testing-library.com/docs/react-testing-library/setup#custom-render"}),"Follow this great guide on how to set this up"),".")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"render")," method returns a ",Object(i.b)("inlineCode",{parentName:"p"},"RenderResult")," object having properties described below."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Latest ",Object(i.b)("inlineCode",{parentName:"p"},"render")," result is kept in ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#screen"}),Object(i.b)("inlineCode",{parentName:"a"},"screen"))," variable that can be imported from ",Object(i.b)("inlineCode",{parentName:"p"},"@testing-library/react-native")," package. "),Object(i.b)("p",{parentName:"div"},"Using ",Object(i.b)("inlineCode",{parentName:"p"},"screen")," instead of destructuring ",Object(i.b)("inlineCode",{parentName:"p"},"render")," result is recommended approach. See ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://kentcdodds.com/blog/common-mistakes-with-react-testing-library#not-using-screen"}),"this article")," from Kent C. Dodds for more details."))),Object(i.b)("h3",{id:"queries"},Object(i.b)("inlineCode",{parentName:"h3"},"...queries")),Object(i.b)("p",null,"The most important feature of ",Object(i.b)("inlineCode",{parentName:"p"},"render")," is providing a set of helpful queries that allow you to find certain elements in the view hierarchy."),Object(i.b)("p",null,"See ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/react-native-testing-library/docs/api-queries"}),"Queries")," for a complete list."),Object(i.b)("h4",{id:"example"},"Example"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render } from '@testing-library/react-native';\n\nconst { getByText, queryByA11yState } = render(<Component />);\n")),Object(i.b)("h3",{id:"update"},Object(i.b)("inlineCode",{parentName:"h3"},"update")),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Also available under ",Object(i.b)("inlineCode",{parentName:"em"},"rerender")," alias")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"update(element: React.Element<any>): void\nrerender(element: React.Element<any>): void\n")),Object(i.b)("p",null,"Re-render the in-memory tree with a new root element. This simulates a React update at the root. If the new element has the same type and key as the previous element, the tree will be updated; otherwise, it will re-mount a new tree. This is useful when testing for ",Object(i.b)("inlineCode",{parentName:"p"},"componentDidUpdate")," behavior, by passing updated props to the component."),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/callstack/react-native-testing-library/blob/f96d782d26dd4815dbfd01de6ef7a647efd1f693/src/__tests__/act.test.js#L31-L37"}),"Example code")),Object(i.b)("h3",{id:"unmount"},Object(i.b)("inlineCode",{parentName:"h3"},"unmount")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"unmount(): void\n")),Object(i.b)("p",null,"Unmount the in-memory tree, triggering the appropriate lifecycle events."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Usually you should not need to call ",Object(i.b)("inlineCode",{parentName:"p"},"unmount")," as it is done automatically if your test runner supports ",Object(i.b)("inlineCode",{parentName:"p"},"afterEach")," hook (like Jest, mocha, Jasmine)."))),Object(i.b)("h3",{id:"debug"},Object(i.b)("inlineCode",{parentName:"h3"},"debug")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"debug(message?: string): void\n")),Object(i.b)("p",null,"Pretty prints deeply rendered component passed to ",Object(i.b)("inlineCode",{parentName:"p"},"render")," with optional message on top."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"render(<Component />);\n\nscreen.debug('optional message');\n")),Object(i.b)("p",null,"logs optional message and colored JSX:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"optional message\n\n<View\n  onPress={[Function bound fn]}\n>\n  <Text>Press me</Text>\n</View>\n")),Object(i.b)("h4",{id:"debugshallow"},Object(i.b)("inlineCode",{parentName:"h4"},"debug.shallow")),Object(i.b)("p",null,"Pretty prints shallowly rendered component passed to ",Object(i.b)("inlineCode",{parentName:"p"},"render")," with optional message on top."),Object(i.b)("h3",{id:"tojson"},Object(i.b)("inlineCode",{parentName:"h3"},"toJSON")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"toJSON(): ReactTestRendererJSON | null\n")),Object(i.b)("p",null,"Get the rendered component JSON representation, e.g. for snapshot testing."),Object(i.b)("h3",{id:"container"},Object(i.b)("inlineCode",{parentName:"h3"},"container")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"container: ReactTestInstance;\n")),Object(i.b)("p",null,"A reference to the rendered root element."),Object(i.b)("h2",{id:"screen"},Object(i.b)("inlineCode",{parentName:"h2"},"screen")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"let screen: RenderResult;\n")),Object(i.b)("p",null,"Hold the value of latest render call for easier access to query and other functions returned by ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#render"}),Object(i.b)("inlineCode",{parentName:"a"},"render")),". "),Object(i.b)("p",null,"Its value is automatically cleared after each test by calling ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#cleanup"}),Object(i.b)("inlineCode",{parentName:"a"},"cleanup")),". If no ",Object(i.b)("inlineCode",{parentName:"p"},"render")," call has been made in a given test then it holds a special object that implements ",Object(i.b)("inlineCode",{parentName:"p"},"RenderResult")," but throws a helpful error on each property and method access."),Object(i.b)("h2",{id:"cleanup"},Object(i.b)("inlineCode",{parentName:"h2"},"cleanup")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const cleanup: () => void;\n")),Object(i.b)("p",null,"Unmounts React trees that were mounted with ",Object(i.b)("inlineCode",{parentName:"p"},"render")," and clears ",Object(i.b)("inlineCode",{parentName:"p"},"screen")," variable that holds latest ",Object(i.b)("inlineCode",{parentName:"p"},"render")," output."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Please note that this is done automatically if the testing framework you're using supports the ",Object(i.b)("inlineCode",{parentName:"p"},"afterEach")," global (like mocha, Jest, and Jasmine). If not, you will need to do manual cleanups after each test."))),Object(i.b)("p",null,"For example, if you're using the ",Object(i.b)("inlineCode",{parentName:"p"},"jest")," testing framework, then you would need to use the ",Object(i.b)("inlineCode",{parentName:"p"},"afterEach")," hook like so:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { cleanup, render } from '@testing-library/react-native/pure';\nimport { View } from 'react-native';\n\nafterEach(cleanup);\n\nit('renders a view', () => {\n  render(<View />);\n  // ...\n});\n")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"afterEach(cleanup)")," call also works in ",Object(i.b)("inlineCode",{parentName:"p"},"describe")," blocks:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"describe('when logged in', () => {\n  afterEach(cleanup);\n\n  it('renders the user', () => {\n    render(<SiteHeader />);\n    // ...\n  });\n});\n")),Object(i.b)("p",null,"Failing to call ",Object(i.b)("inlineCode",{parentName:"p"},"cleanup")," when you've called ",Object(i.b)("inlineCode",{parentName:"p"},"render"),' could result in a memory leak and tests which are not "idempotent" (which can lead to difficult to debug errors in your tests).'),Object(i.b)("h2",{id:"fireevent"},Object(i.b)("inlineCode",{parentName:"h2"},"fireEvent")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"fireEvent(element: ReactTestInstance, eventName: string, ...data: Array<any>): void\n")),Object(i.b)("p",null,"Fires native-like event with data."),Object(i.b)("p",null,"Invokes a given event handler (whether native or custom) on the element, bubbling to the root of the rendered tree."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render, screen, fireEvent } from '@testing-library/react-native';\n\ntest('fire changeText event', () => {\n  const onEventMock = jest.fn();\n  render(\n    // MyComponent renders TextInput which has a placeholder 'Enter details'\n    // and with `onChangeText` bound to handleChangeText\n    <MyComponent handleChangeText={onEventMock} />\n  );\n\n  fireEvent(screen.getByPlaceholderText('change'), 'onChangeText', 'ab');\n  expect(onEventMock).toHaveBeenCalledWith('ab');\n});\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Please note that from version ",Object(i.b)("inlineCode",{parentName:"p"},"7.0")," ",Object(i.b)("inlineCode",{parentName:"p"},"fireEvent")," performs checks that should prevent events firing on disabled elements."))),Object(i.b)("p",null,"An example using ",Object(i.b)("inlineCode",{parentName:"p"},"fireEvent")," with native events that aren't already aliased by the ",Object(i.b)("inlineCode",{parentName:"p"},"fireEvent")," api."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { TextInput, View } from 'react-native';\nimport { fireEvent, render } from '@testing-library/react-native';\n\nconst onBlurMock = jest.fn();\n\nrender(\n  <View>\n    <TextInput placeholder=\"my placeholder\" onBlur={onBlurMock} />\n  </View>\n);\n\n// you can omit the `on` prefix\nfireEvent(screen.getByPlaceholderText('my placeholder'), 'blur');\n")),Object(i.b)("h2",{id:"fireeventeventname"},Object(i.b)("inlineCode",{parentName:"h2"},"fireEvent[eventName]")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"fireEvent[eventName](element: ReactTestInstance, ...data: Array<any>): void\n")),Object(i.b)("p",null,"Convenience methods for common events like: ",Object(i.b)("inlineCode",{parentName:"p"},"press"),", ",Object(i.b)("inlineCode",{parentName:"p"},"changeText"),", ",Object(i.b)("inlineCode",{parentName:"p"},"scroll"),"."),Object(i.b)("h3",{id:"fireeventpress"},Object(i.b)("inlineCode",{parentName:"h3"},"fireEvent.press")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"fireEvent.press: (element: ReactTestInstance, ...data: Array<any>) => void\n")),Object(i.b)("p",null,"Invokes ",Object(i.b)("inlineCode",{parentName:"p"},"press")," event handler on the element or parent element in the tree."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { View, Text, TouchableOpacity } from 'react-native';\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\nconst onPressMock = jest.fn();\nconst eventData = {\n  nativeEvent: {\n    pageX: 20,\n    pageY: 30,\n  },\n};\n\nrender(\n  <View>\n    <TouchableOpacity onPress={onPressMock}>\n      <Text>Press me</Text>\n    </TouchableOpacity>\n  </View>\n);\n\nfireEvent.press(screen.getByText('Press me'), eventData);\nexpect(onPressMock).toHaveBeenCalledWith(eventData);\n")),Object(i.b)("h3",{id:"fireeventchangetext"},Object(i.b)("inlineCode",{parentName:"h3"},"fireEvent.changeText")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"fireEvent.changeText: (element: ReactTestInstance, ...data: Array<any>) => void\n")),Object(i.b)("p",null,"Invokes ",Object(i.b)("inlineCode",{parentName:"p"},"changeText")," event handler on the element or parent element in the tree."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { View, TextInput } from 'react-native';\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\nconst onChangeTextMock = jest.fn();\nconst CHANGE_TEXT = 'content';\n\nrender(\n  <View>\n    <TextInput placeholder=\"Enter data\" onChangeText={onChangeTextMock} />\n  </View>\n);\n\nfireEvent.changeText(screen.getByPlaceholderText('Enter data'), CHANGE_TEXT);\n")),Object(i.b)("h3",{id:"fireeventscroll"},Object(i.b)("inlineCode",{parentName:"h3"},"fireEvent.scroll")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"fireEvent.scroll: (element: ReactTestInstance, ...data: Array<any>) => void\n")),Object(i.b)("p",null,"Invokes ",Object(i.b)("inlineCode",{parentName:"p"},"scroll")," event handler on the element or parent element in the tree."),Object(i.b)("h4",{id:"on-a-scrollview"},"On a ",Object(i.b)("inlineCode",{parentName:"h4"},"ScrollView")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { ScrollView, Text } from 'react-native';\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\nconst onScrollMock = jest.fn();\nconst eventData = {\n  nativeEvent: {\n    contentOffset: {\n      y: 200,\n    },\n  },\n};\n\nrender(\n  <ScrollView onScroll={onScrollMock}>\n    <Text>XD</Text>\n  </ScrollView>\n);\n\nfireEvent.scroll(screen.getByText('scroll-view'), eventData);\n")),Object(i.b)("h4",{id:"on-a-flatlist"},"On a ",Object(i.b)("inlineCode",{parentName:"h4"},"FlatList")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { FlatList, View } from 'react-native';\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\nconst onEndReached = jest.fn();\nrender(\n  <FlatList\n    data={Array.from({ length: 10 }, (_, key) => ({ key: `${key}` }))}\n    renderItem={() => <View style={{ height: 500, width: 100 }} />}\n    onEndReached={onEndReached}\n    onEndReachedThreshold={0.2}\n    testID=\"flat-list\"\n  />\n);\nconst eventData = {\n  nativeEvent: {\n    contentOffset: {\n      y: 500,\n    },\n    contentSize: {\n      // Dimensions of the scrollable content\n      height: 500,\n      width: 100,\n    },\n    layoutMeasurement: {\n      // Dimensions of the device\n      height: 100,\n      width: 100,\n    },\n  },\n};\n\nfireEvent.scroll(screen.getByTestId('flat-list'), eventData);\nexpect(onEndReached).toHaveBeenCalled();\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If you're noticing that components are not being found on a list, even after mocking a scroll event, try changing the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://reactnative.dev/docs/flatlist#initialnumtorender"}),Object(i.b)("inlineCode",{parentName:"a"},"initialNumToRender"))," that you have set. If you aren't comfortable changing the code to accept this prop from the unit test, try using an e2e test that might better suit what use case you're attempting to replicate."))),Object(i.b)("h2",{id:"waitfor"},Object(i.b)("inlineCode",{parentName:"h2"},"waitFor")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/waitFor.test.tsx"}),Object(i.b)("inlineCode",{parentName:"a"},"Example code")))),Object(i.b)("p",null,"Defined as:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function waitFor<T>(\n  expectation: () => T,\n  { timeout: number = 4500, interval: number = 50 }\n): Promise<T> {}\n")),Object(i.b)("p",null,"Waits for non-deterministic periods of time until your element appears or times out. ",Object(i.b)("inlineCode",{parentName:"p"},"waitFor")," periodically calls ",Object(i.b)("inlineCode",{parentName:"p"},"expectation")," every ",Object(i.b)("inlineCode",{parentName:"p"},"interval")," milliseconds to determine whether the element appeared or not."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render, screen, waitFor } from '@testing-library/react-native';\n\ntest('waiting for an Banana to be ready', async () => {\n  render(<Banana />);\n\n  await waitFor(() => screen.getByText('Banana ready'));\n});\n")),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"In order to properly use ",Object(i.b)("inlineCode",{parentName:"p"},"waitFor")," you need at least React >=16.9.0 (featuring async ",Object(i.b)("inlineCode",{parentName:"p"},"act"),") or React Native >=0.61 (which comes with React >=16.9.0)."))),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If you receive warnings related to ",Object(i.b)("inlineCode",{parentName:"p"},"act()")," function consult our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/react-native-testing-library/docs/understanding-act"}),"Undestanding Act")," function document."))),Object(i.b)("h2",{id:"waitforelementtoberemoved"},Object(i.b)("inlineCode",{parentName:"h2"},"waitForElementToBeRemoved")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/waitForElementToBeRemoved.test.tsx"}),Object(i.b)("inlineCode",{parentName:"a"},"Example code")))),Object(i.b)("p",null,"Defined as:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function waitForElementToBeRemoved<T>(\n  expectation: () => T,\n  { timeout: number = 4500, interval: number = 50 }\n): Promise<T> {}\n")),Object(i.b)("p",null,"Waits for non-deterministic periods of time until queried element is removed or times out. ",Object(i.b)("inlineCode",{parentName:"p"},"waitForElementToBeRemoved")," periodically calls ",Object(i.b)("inlineCode",{parentName:"p"},"expectation")," every ",Object(i.b)("inlineCode",{parentName:"p"},"interval")," milliseconds to determine whether the element has been removed or not."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render, screen, waitForElementToBeRemoved } from '@testing-library/react-native';\n\ntest('waiting for an Banana to be removed', async () => {\n  render(<Banana />);\n\n  await waitForElementToBeRemoved(() => screen.getByText('Banana ready'));\n});\n")),Object(i.b)("p",null,"This method expects that the element is initially present in the render tree and then is removed from it. If the element is not present when you call this method it throws an error."),Object(i.b)("p",null,"You can use any of ",Object(i.b)("inlineCode",{parentName:"p"},"getBy"),", ",Object(i.b)("inlineCode",{parentName:"p"},"getAllBy"),", ",Object(i.b)("inlineCode",{parentName:"p"},"queryBy")," and ",Object(i.b)("inlineCode",{parentName:"p"},"queryAllBy")," queries for ",Object(i.b)("inlineCode",{parentName:"p"},"expectation")," parameter."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"In order to properly use ",Object(i.b)("inlineCode",{parentName:"p"},"waitForElementToBeRemoved")," you need at least React >=16.9.0 (featuring async ",Object(i.b)("inlineCode",{parentName:"p"},"act"),") or React Native >=0.61 (which comes with React >=16.9.0)."))),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If you receive warnings related to ",Object(i.b)("inlineCode",{parentName:"p"},"act()")," function consult our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/react-native-testing-library/docs/understanding-act"}),"Undestanding Act")," function document."))),Object(i.b)("h2",{id:"within-getqueriesforelement"},Object(i.b)("inlineCode",{parentName:"h2"},"within"),", ",Object(i.b)("inlineCode",{parentName:"h2"},"getQueriesForElement")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/within.test.tsx"}),Object(i.b)("inlineCode",{parentName:"a"},"Example code")))),Object(i.b)("p",null,"Defined as:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function within(instance: ReactTestInstance): Queries\nfunction getQueriesForElement(instance: ReactTestInstance): Queries\n")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"within")," (also available as ",Object(i.b)("inlineCode",{parentName:"p"},"getQueriesForElement")," alias) performs ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/react-native-testing-library/docs/api-queries"}),"queries")," scoped to given element."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Please note that additional ",Object(i.b)("inlineCode",{parentName:"p"},"render")," specific operations like ",Object(i.b)("inlineCode",{parentName:"p"},"update"),", ",Object(i.b)("inlineCode",{parentName:"p"},"unmount"),", ",Object(i.b)("inlineCode",{parentName:"p"},"debug"),", ",Object(i.b)("inlineCode",{parentName:"p"},"toJSON")," are ",Object(i.b)("em",{parentName:"p"},"not")," included."))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"const detailsScreen = within(screen.getByA11yHint('Details Screen'));\nexpect(detailsScreen.getByText('Some Text')).toBeTruthy();\nexpect(detailsScreen.getByDisplayValue('Some Value')).toBeTruthy();\nexpect(detailsScreen.queryByLabelText('Some Label')).toBeTruthy();\nawait expect(detailsScreen.findByA11yHint('Some Label')).resolves.toBeTruthy();\n")),Object(i.b)("p",null,"Use cases for scoped queries include:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"queries scoped to a single item inside a FlatList containing many items"),Object(i.b)("li",{parentName:"ul"},"queries scoped to a single screen in tests involving screen transitions (e.g. with react-navigation)")),Object(i.b)("h2",{id:"query-apis"},Object(i.b)("inlineCode",{parentName:"h2"},"query")," APIs"),Object(i.b)("p",null,"Each of the get APIs listed in the render section above have a complimentary query API. The get APIs will throw errors if a proper node cannot be found. This is normally the desired effect. However, if you want to make an assertion that an element is not present in the hierarchy, then you can use the query API instead:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render, screen } from '@testing-library/react-native';\n\nrender(<Form />);\nconst submitButton = screen.queryByText('submit');\nexpect(submitButton).toBeNull(); // it doesn't exist\n")),Object(i.b)("h2",{id:"queryall-apis"},Object(i.b)("inlineCode",{parentName:"h2"},"queryAll")," APIs"),Object(i.b)("p",null,"Each of the query APIs have a corresponding queryAll version that always returns an Array of matching nodes. getAll is the same but throws when the array has a length of 0."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { render } from '@testing-library/react-native';\n\nrender(<Forms />);\nconst submitButtons = screen.queryAllByText('submit');\nexpect(submitButtons).toHaveLength(3); // expect 3 elements\n")),Object(i.b)("h2",{id:"act"},Object(i.b)("inlineCode",{parentName:"h2"},"act")),Object(i.b)("p",null,"Useful function to help testing components that use hooks API. By default any ",Object(i.b)("inlineCode",{parentName:"p"},"render"),", ",Object(i.b)("inlineCode",{parentName:"p"},"update"),", ",Object(i.b)("inlineCode",{parentName:"p"},"fireEvent"),", and ",Object(i.b)("inlineCode",{parentName:"p"},"waitFor")," calls are wrapped by this function, so there is no need to wrap it manually. This method is re-exported from ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/react/blob/main/packages/react-test-renderer/src/ReactTestRenderer.js#L567%5D"}),Object(i.b)("inlineCode",{parentName:"a"},"react-test-renderer")),"."),Object(i.b)("p",null,"Consult our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/react-native-testing-library/docs/understanding-act"}),"Undestanding Act function")," document for more understanding of its intricacies."),Object(i.b)("h2",{id:"renderhook"},Object(i.b)("inlineCode",{parentName:"h2"},"renderHook")),Object(i.b)("p",null,"Defined as:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"function renderHook<Result, Props>(\n  callback: (props?: Props) => Result,\n  options?: RenderHookOptions<Props>\n): RenderHookResult<Result, Props>;\n")),Object(i.b)("p",null,"Renders a test component that will call the provided ",Object(i.b)("inlineCode",{parentName:"p"},"callback"),", including any hooks it calls, every time it renders. Returns ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#renderhookresult-object"}),Object(i.b)("inlineCode",{parentName:"a"},"RenderHookResult"))," object, which you can interact with."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import { renderHook } from '@testing-library/react-native';\nimport { useCount } from '../useCount';\n\nit('should increment count', () => {\n  const { result } = renderHook(() => useCount());\n\n  expect(result.current.count).toBe(0);\n  act(() => {\n    // Note that you should wrap the calls to functions your hook returns with `act` if they trigger an update of your hook's state to ensure pending useEffects are run before your next assertion.\n    result.increment();\n  });\n  expect(result.current.count).toBe(1);\n});\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"// useCount.js\nexport const useCount = () => {\n  const [count, setCount] = useState(0);\n  const increment = () => setCount((previousCount) => previousCount + 1);\n\n  return { count, increment };\n};\n")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," function accepts the following arguments:"),Object(i.b)("h3",{id:"callback"},Object(i.b)("inlineCode",{parentName:"h3"},"callback")),Object(i.b)("p",null,"The function that is called each ",Object(i.b)("inlineCode",{parentName:"p"},"render")," of the test component. This function should call one or more hooks for testing."),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"props")," passed into the callback will be the ",Object(i.b)("inlineCode",{parentName:"p"},"initialProps")," provided in the ",Object(i.b)("inlineCode",{parentName:"p"},"options")," to ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook"),", unless new props are provided by a subsequent ",Object(i.b)("inlineCode",{parentName:"p"},"rerender")," call."),Object(i.b)("h3",{id:"options-optional"},Object(i.b)("inlineCode",{parentName:"h3"},"options")," (Optional)"),Object(i.b)("p",null,"A ",Object(i.b)("inlineCode",{parentName:"p"},"RenderHookOptions<Props>")," object to modify the execution of the ",Object(i.b)("inlineCode",{parentName:"p"},"callback")," function, containing the following properties:"),Object(i.b)("h4",{id:"initialprops"},Object(i.b)("inlineCode",{parentName:"h4"},"initialProps")),Object(i.b)("p",null,"The initial values to pass as ",Object(i.b)("inlineCode",{parentName:"p"},"props")," to the ",Object(i.b)("inlineCode",{parentName:"p"},"callback")," function of ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook"),". The ",Object(i.b)("inlineCode",{parentName:"p"},"Props")," type is determined by the type passed to or inferred by the ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," call."),Object(i.b)("h4",{id:"wrapper"},Object(i.b)("inlineCode",{parentName:"h4"},"wrapper")),Object(i.b)("p",null,"A React component to wrap the test component in when rendering. This is usually used to add context providers from ",Object(i.b)("inlineCode",{parentName:"p"},"React.createContext")," for the hook to access with ",Object(i.b)("inlineCode",{parentName:"p"},"useContext"),"."),Object(i.b)("h3",{id:"renderhookresult-object"},Object(i.b)("inlineCode",{parentName:"h3"},"RenderHookResult")," object"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"interface RenderHookResult<Result, Props> {\n  result: { current: Result };\n  rerender: (props: Props) => void;\n  unmount: () => void;\n}\n")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," function returns an object that has the following properties:"),Object(i.b)("h4",{id:"result"},Object(i.b)("inlineCode",{parentName:"h4"},"result")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"current")," value of the ",Object(i.b)("inlineCode",{parentName:"p"},"result")," will reflect the latest of whatever is returned from the ",Object(i.b)("inlineCode",{parentName:"p"},"callback")," passed to ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook"),". The ",Object(i.b)("inlineCode",{parentName:"p"},"Result")," type is determined by the type passed to or inferred by the ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," call."),Object(i.b)("h4",{id:"rerender"},Object(i.b)("inlineCode",{parentName:"h4"},"rerender")),Object(i.b)("p",null,"A function to rerender the test component, causing any hooks to be recalculated. If ",Object(i.b)("inlineCode",{parentName:"p"},"newProps")," are passed, they will replace the ",Object(i.b)("inlineCode",{parentName:"p"},"callback")," function's ",Object(i.b)("inlineCode",{parentName:"p"},"initialProps")," for subsequent rerenders. The ",Object(i.b)("inlineCode",{parentName:"p"},"Props")," type is determined by the type passed to or inferred by the ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," call."),Object(i.b)("h4",{id:"unmount-1"},Object(i.b)("inlineCode",{parentName:"h4"},"unmount")),Object(i.b)("p",null,"A function to unmount the test component. This is commonly used to trigger cleanup effects for ",Object(i.b)("inlineCode",{parentName:"p"},"useEffect")," hooks."),Object(i.b)("h3",{id:"examples"},"Examples"),Object(i.b)("p",null,"Here we present some extra examples of using ",Object(i.b)("inlineCode",{parentName:"p"},"renderHook")," API."),Object(i.b)("h4",{id:"with-initialprops"},"With ",Object(i.b)("inlineCode",{parentName:"h4"},"initialProps")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const useCount = (initialCount: number) => {\n  const [count, setCount] = useState(initialCount);\n  const increment = () => setCount((previousCount) => previousCount + 1);\n\n  useEffect(() => {\n    setCount(initialCount);\n  }, [initialCount]);\n\n  return { count, increment };\n};\n\nit('should increment count', () => {\n  const { result, rerender } = renderHook(\n    (initialCount: number) => useCount(initialCount),\n    { initialProps: 1 }\n  );\n\n  expect(result.current.count).toBe(1);\n\n  act(() => {\n    result.increment();\n  });\n\n  expect(result.current.count).toBe(2);\n  rerender(5);\n  expect(result.current.count).toBe(5);\n});\n")),Object(i.b)("h4",{id:"with-wrapper"},"With ",Object(i.b)("inlineCode",{parentName:"h4"},"wrapper")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-tsx"}),"it('should use context value', () => {\n  function Wrapper({ children }: { children: ReactNode }) {\n    return <Context.Provider value=\"provided\">{children}</Context.Provider>;\n  }\n\n  const { result } = renderHook(() => useHook(), { wrapper: Wrapper });\n  // ...\n});\n")))}s.isMDXComponent=!0},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),s=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},p=function(e){var t=s(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,l=b(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,u=p["".concat(c,".").concat(m)]||p[m]||d[m]||i;return n?r.a.createElement(u,o({ref:t},l,{components:n})):r.a.createElement(u,o({ref:t},l))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=m;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var l=2;l<i;l++)c[l]=n[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);